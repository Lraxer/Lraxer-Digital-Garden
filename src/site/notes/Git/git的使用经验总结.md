---
{"dg-publish":true,"permalink":"/Git/git的使用经验总结/"}
---


以下是我自己使用 git 进行编程的一些简单的经验。不过我大多数时候都是单独开发，缺少团队协作的经历，可能不适用于一些工作场景。

## 使用新建的分支进行开发

不要在 main branch 开发。确保每次开发新的特性，或者修复 bug 都在 dev 之类的分支上进行。

## 确保每次提交后项目都可用

如果一个项目是从零开始写，不要写完一个功能就向 main branch 合并或推送。例如写一个栈的时候，如果只写了 `push` 而没有 `pop` 以及其他必要的功能，这个程序无法正确地运行，就不要发布。

## 一开始就确定好代码格式

在项目一开始就规定好代码格式。最好上传 `.clang-format` 等规定代码格式的脚本，以及使用 Github Action 等自动化工具检查每次提交以及 PR 的格式是否规范。

## 整理开发过程中的提交

如果需要经常在不同设备上开发项目，而当前设备正在进行的开发尚未结束，就要换到另一台设备上，此时不得不通过先将代码推送到远程仓库。

例如前面的栈，刚实现了 `push` ，提交了一个 commit ，后面换到其他设备上完成了 `pop` ，又提交了一个 commit ，最后写完了第一版的代码，最后提交了一次。如果此时就把当前 dev 分支的代码合并进入 main branch ，事实上还是违反了前面的原则。

因此我的建议是在合并到 main branch 之前，先整理当前开发分支的 commit 。不过这个建议不一定适合多人协作开发的场景和大项目，因为多人共同开发一个项目，如果把最初版本的这些 commit 合并了，那就不知道是谁写的哪一部分代码，出了事也没办法去追责。大项目一上来就提交一个较完整的版本可能不太现实，或许通过 tag 等方式标明可以回退的版本是比较好的。只是对于个人开发者，我认为这是一个比较有效的保持 commit 整洁的方式。

通过 `git rebase` 整理当前分支，可以参考 [[Git/git rebase 的使用\|git rebase 的使用]] 。但我建议通过 `git merge` 合并分支，只用 `git rebase` 整理开发过程中的提交。

除了最初版本的开发，对于同一个文件的多处改动，也有必要按照解决的问题分成多个 commit 去提交。可以参考 [[Git/分批提交同一个文件的改动\|分批提交同一个文件的改动]] 。

最理想的情况是每个 commit 都解决了一个问题，这样整个提交记录就会非常整洁清晰。对于最初版本的开发，个人开发者可以通过合并实现多个功能的 commit ，形成一个包含整个最初版本项目的比较庞大的 commit ，合并到 main branch 中。